{
  "name": "esp-idf-v5.3",
  "image": "espressif/idf:release-v5.3",
  "workspaceFolder": "/workspaces/MarioKar",

  // Keep container alive and load IDF env explicitly
  "overrideCommand": true,
  "entrypoint": "/bin/bash",
  "command": [
    "-lc",
    "source /opt/esp/idf/export.sh && echo '[devcontainer] IDF env loaded' && while sleep 3600; do :; done"
  ],

  "postCreateCommand": "idf.py --version || true",
  "customizations": {
    "vscode": {
      "extensions": [
        "espressif.esp-idf-extension",
        "ms-vscode.cpptools",
        "ms-vscode.cmake-tools"
      ]
    }
  },

  "runArgs": ["--device=/dev/ttyACM0:/dev/ttyACM0"]
}
